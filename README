FUNCTIONS 
A block of reusable code used to perform specific tasks 

Variables
Data Types
Operators
If statements
Data Structures
Loops 
Functions 


Why Use Functions?
1. Code Reusability
2. Modularity - breaking large codebase into smaller managaebale pieces or modules
3. Readability & Organization
4. Easier debugging - catch and solve errors betterr
5. Better scaling


Python functions -> syntax ->
def function_name:
    //function body


def add_numbers(a,b):   ---> function definition
def test_functions():
function defintion -> def keyword, 
                -> function signature(name of your function + whether the function has parameters   or not )

-> parameter - placeholder / temporary values
-> arguments - real values

add_numbers(number1,number2). -> function call -> pass arguments

function definition
function body
function call

functions are used with return keyword 
return keyword -> return some value from a function. && signify the end of a function


Global vs Local Variables 
Global Variable - a variable that can be accessed anywhere in the program
Local Variable - are variables that are only accessible in their local/block scope


Function 
Methods - functions attached to classes - OOP -Object Oriented Programming - classes and objects


Types of functions
1.Inbuilt functions - come with the progamming language and have predefined tasks e.g print()
2.user defined functions - created by the programmer - > def add_numbers():




1.Python - functions, lists ,tuples , data types
2.sql - queries 



Create a new project called MyDuka 
-main.py 
-database.py

-> Open a new terminal and run the following commands to install the packages below
1. pip install flask
2. pip install psycopg2-binary


Functions
A Function is a block of reusable code used to perform specific tasks


Variables
Data types
Operators
if statements
data structures
loops

functions

Why use Functions?
1. Reusability
2. Code organization and readability
3. Modularity - breaking large code into smaller manageable pieces or modules
4. Easier debugging - catch  errors better and faster

Types of Functions:
1.Inbuilt functions - come with the programming language and are meant to do specific predefined tasks
    -range() -print()
2.User-defined functions - are created by the user for their use - def calculate()

**parameter -> temporary/placeholder variables / values in the function
**return -> returns some value from a function call and signifies the end of a function
**arguments -> real values passed to a function when calling it

**Global variables - variables that are accessible from anywhere in the program
**Local variables - variables that are only accessible in their local / block scope


Internet - network of networks
web/www -> service that runs on the internet that enables us to connect to the internet
Uses http && https to run requests and transfer data

https://meet.google.com/dsh-idtb-oqb

http & https -> transfer protocols -> establish communication and transfer data over a network

http - not secure -packets / data can be tampered with
https - data encryption -> 

Server - a computer that accepts requests

Build your application
Host it on a server
Ip address is assigned to that application 

Ip address is a number used to uniquely identify a device on a network e.g 142.111.12.82
Domain - user friendly name attached to an ip aaddress used to identify devices / applications

Safaricom - build application - safaricom.co.ke
-host it on a server
-ip address assigned to application e.g  142.111.12.82
-attach a domain name to ip address -> www.google.com
DNS

Find an ip address using domain -> ping 



PSYCOPG2

Is a PostgreSQL adapater for Python . A driver - connects your Python code to a Postgres database

 psycopg2.connect(). - creates a connection between Python and a Postgres database


create database myduka_db;
\c myduka_db


insert into products(name,buying_price,selling_price)values('bread',50,60);

host -> where is my db located 
**localhost -> your computer/device  127.0.0.1

port -> where exactly on my device is the Postgres service running
**5432 -> default Postgres port

user & password -> used to authenticte a postgres user and grant them access to a Postgres database

dbname - Postgres database you're connecting to

cur -> object used to execute sql queries or perform db operations
cur.execute() -> executes an sql query

Insert 2 sales and view them using psycopg2

N/B:- List of tuples

insert into sales(pid,quantity)values(1,20);

CRUD 
C-Create  - Insert
R-Read.   - Select
U-Update. -Update
D-Delete. -Delete

double quote query

Object Oriented Programming - OOP

Data Types -
1.Inbuilt data types -> come with the programming language
-> int , float , str, boolean -primitive
-> lists, sets , tuples , dicts

2.user defined data types - created by the programmer
-> create classes (blueprints) then create objects from it
e.g. Create a data type called Person (class) then create Alvin(object) from Person
-classes are created using the class keyword

Class - a blueprint for creating objects 

Classes contain the following 2 things:
1.Attributes - data / variables -> what does a class have? e.g name, age
2.Behaviour  - functions (methods) - what a class can do? - walk, eat, talk

Method - a function inside a class

Constructor - a special method used to create and initialize objects

class - blueprint
object - an instance of a class

self - represents the current object / instance of the class


Task 
Create a BankAccount class
Have a constructor to initalize the account with account number , balance , owner_name
Have the methods:
1. deposit() 
2. withdraw()
3. display_info()
create 2 BankAccounts that can deposit, withdraw and display info


Task2
Create a Student class
It should have the following attributes:
 -student_id -name -email -course
 It should have the following methods:
 - enroll_course()
 - drop_course()
 - set_grade()
-  display_info()
Create 2 student objects who can do all of the above


#inheritance


Task3
Create a Car Class
Have the following attributes
- brand - model - year -fuel_capcity - fuel_level -is_running(boolen value)
Have the methods
- start()
- stop()
- refuel()
- drive()
- display_car_info()

1.Inheritance
2.Encapsulation
3.Abstraction ->
4.Polymorphism -> Method Overriding
*Method overriding, method overloading, operator overloding , aggregation , association


FLASK
A python framework used to build web applications

Framework vs Library?

Concept -Building A House
Scenario 1 - Framework
Feisal wants to build a house.he recognizes that he isnt an expert in building / construction. He decides to enlist 
the help of construction professionals (architect, engineer, pm , construction workers). These professionals each play a role in building the house and they make the process easier since they have experience. But for successful construction, Feisal has to follow the strict guidelines as laid out by these professionals e.g the house has to have a strong foundation / walls must be built using bricks 
Note -> easier process but strict guidelines


Scenario 2 - Library
Stephen wants to build a house. He decides he doesnt need the help of construction professionals,instead he decides to build the house
from sratch himself. He has to to design , correct, know and purchase all materials himself. Since he oversees the entire process he doesnt need to follow ny guideline or timeline. He's solely in charge of everything.
Note-> The process is flexible but very hard


Framework -> prebuilt structure of code ,tools, libraies that provides a foundation for building applications. It provided prebuilt and reusable code so that developers dont have to build from scratch
-> Has very strict guidelines on usage

Examples:
Python -> Flask, FastAPI, Django
Java -> Spring
C# -> .NET
NodeJS -> Express
Ruby -> Ruby on Rails
Golang -> Gin

FLASK
1.Routing
-> A mechanism to map / connect URLs to Python functions -> system for resource navigation -> connects a URL to a function in your Flask app

URl -> full address used to access resources on the web
https://meet.google.com/dsh-idtb-oqb
->In flask routing is defined using a decorator function -> @app.route()
-> Decorator is a function that allows you to modify the behaviour of another function -> usually have the @ prefix 
-> @app.route() has some parameters:
1.rule or path -> the path a user accesses on the browser
2. methods

https://meet.google.com/dsh-idtb-oqb

https://techcamp.co.ke/
https://techcamp.co.ke/contact-us
https://techcamp.co.ke/certifications
default route -> index route -> /



@app.route('/') -> decorator function
def home():   -> view function
    return "My index route"


Render or return a full html page
To render Html pages with Flask we use a function: render_template() which is imported from flask
To return a html page with render_template() you MUST have the following structure:

MYDUKA
templates
    -> all html files must be here
    -index.html
    -products.html
    -sales.html
    -stock.html
    -dashboard.html
    -register.html
    -login.html
static
    -> all css , js and all static files
    -> static files - images , videos , favicons, icons
database.py
main.py


To pass data from Python to html we use Jinja

Jinja - a syntax inbuilt with Flask used to render Python data
- Is a templating engine integrated with Flask to render dynamic html pages


Key features of Jinja
1.Variables - {{}}
2.Control structures - {% %}
Control Structures
1.Sequence
-> programs execute top to bottom and left to right
2.Selection
-> Decision making
-> Conditional statements -> if...else
3.Repitition
-> Looping -> for ,while

{% for ....%} - initialization

.....

{% endfor %} - termination


{% if ....%}

....


{% endif %}

Task ->
1.Import get_sales() and display sales in sales.html using Jinja
2.Disply both sales and products data in tables
---Hint Use for loop and indexing 


Jinja
A templating engine integrated with Flask to render dynamic html pages
-> Use it to pass data from Python to html
1.Variables - {{}} 
2.Control Structures - {% %}

Control Structures
1.Sequence - top to bottom --> left to right
2.Selection - conditional statements -> if 
3.Repitition - Looping - for and while loop

{% for i in products%}

        {{i}}


{% endfor %}

{% if i%2 == 0%}

....

{% endif %}

Displaying Data In Client
1.Bootstrap Tables
2.Datatables - search, paginations, excel, print


#Task
1. Redo the products display using datatables
2. In  the sales table in created at column limit datetime data to year, month, day , hour and minute

TEMPLATE INHERITANCE
ONE COMMON FILE CALLED A PARENT / BASE TEMPLATE CONTAINING ALL FEATURES THT ARE COMMON ACROSS ALL PAGES e.g footer & navbar

Base -has all common features 
-> Leaves a block for unique features

{% block title %} {% endblock %} - define a unique title for each template
{% block content %} {% endblock %} -> define unique content  for each template

Have the children templates inherit from the base - extends



Function in database.py
import function to main.py
call it in route
pass a variable in render_template() containing data from function call
Use Jinja to display data in the relevant page

Inserting Data in Flask
Inserting Products
CRUD

WORKFLOW
1.Provide the user with a form to insert data
2.User fills the form and submits it - submitted to a Flask route
N/B: - data coming from the form is sent to the server in key value pairs 

        "product_name":"eggs"
        "buying_price":"15"
        "selling_price":"20"

        N/B:-
        -> Any data coming from user input will always be a string
3.Flask extracts form data using the key and processes it 
    -> In the decorator ->METHODS THAT CAN BE USED 
    -> Extract data from the form using a request object
    -> request object has 2 methods:
    a) request.form - method used to access and extract form data using the keys
    b) request.method - method used to determine the method being used by the form
4.Store this data using functions
5.Redirect the user - redirect-url_for
redirect(url_for('')) -takes the name of the view function as a parameter


FORM CHECKLIST
1.action - defines the route where the form data is to be submitted for processing .../add_products
2.method - what do you want the server to do with the data
3.name - key used to identify and extract values from the input
4.input-type -> defining what data type an input takes
5.button - type submit


Method - what a server can do with a resource or data
a) GET - fetching / getting from a server - viewing tweets
b) POST - sending data to a server - insert products, login
c) PUT - update data
d) DELETE - getting rid of data

Task
1.Implement adding and displaying stock(datatables)
-> adding stock is exactly like making 
2.Implement adding products using a modal




Status Codes- unique codes inditicating what happened with a HTTP request
100-199 -> Informational responses
200-299 -> Successful responses
300-399 - redirection messages
400-499 - client error 
500-599 - server errors

Making Purchases 
1,bread,50,60 -> 100

bread - 10
bread - 90
bread - purchase 90
bread - 0

 id | pid | stock_quantity |         created_at         
----+-----+----------------+----------------------------
  1 |   1 |             5 | 2025-09-12 14:57:21.175323



  12 - 7 = 5

   id | pid | stock_quantity |         created_at         
----+-----+----------------+----------------------------
  1 |   1 |             12 | 2025-09-12 14:57:21.175323
  2 |   1 |             20 | 2025-09-12 15:29:27.168993 

32

#sales
   id | pid | quantity |         created_at         
----+-----+----------+----------------------------
  8 |   1 |        8 | 2025-09-12 16:08:30.398638
  9 |   1 |        4 | 2025-09-12 16:08:54.069659
(2 rows)

12
=20


(2 rows)
32 - total stock

7 loaves are purchased at time A
10 loaves are purchased at time B

17 sold

32 - 17 = 15 loaves remaining

getting available stock  = total stock added on a product - total sales of that product

None && Zero

add product -> add stock -> make sale
roduct -> no stock
product -> some stock -> no sales

None - None

100 - none

TypeError: '<' not supported between instances of 'int' and 'str'

Flashing - one time notifications to users based on requests / interaction
flash() - inbuilt function from flask
-> it takes two parameters:
1.Message -> the actual message to be displayed e.g Product added successfully
2.Message Category -> type of message

Message categories
1.success messages ->green
2.error / danger messages ->red
3.warning messages -> yellow
4.info messages -> blue

Flash messages are stored in a session-> session is stored in a cookie
Flask uses a secret key to keep data like sessions / messages safe

jane@mail.com -> 1234 -> secret key signs the cookie
The signature makes sure:
1.data isnt modified
2.only the server that knows the secret key can validate the session 


User Authentication 
1.register users
2.authenticate & login these users

User Registration
User form with input fields - name, email, phone ,password
1.User is provided with a form for registration
2.User fills aand submits the form to Flask through -> CGI 
3.Flask extracts user data using request.form
4.Check if the user already exists using email
5.If user exists -flash they exist and ask them to login instead
6.If they dont exist (new user)
    ->Hash the user's password 
    ->Store the new user along with the hashed password

Functions -> in database -> insert_user() -> check_user()


Password Hashing
-> The process of converting plain text passwords into complex formats that are hard to decipher for the purpose of security
1234 -> 882b77egsgs6 672ygvdy676cxy2y7we7
1234 -> 882b77egsgs6 672ygvdy676cxy2y7we7
1234 -> 882b77egsgs6 672ygvdy676cxy2y7we7
1234 -> 882b77egsgs6 672ygvdy676cxy2y7we7
*Rainbow tables - common passwords
*salting - generating random text, add it to a password to make it more complex and secure
Hussein@123 -> #9jd88xhuyahz5tg29sius87shsyysh
flask-bcrypt

mx882u882w
Hussein@123mx882u882w

pip install flask-bcrypt

N/B -> password stored in db -> hashed password

in login user inputs plain text password










TASK
Write queries to fetch the following:
1.sales per day
2.sales per product
3.profit per day
4.profit per product
Display the above data in the dashboard page using Jinja